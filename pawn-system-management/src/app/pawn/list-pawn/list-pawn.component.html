<div class="container-fluid mt-5 pb-5">
  <div class="row px-0 mx-0" style="height: 80%;">
    <div class="col-lg-2 col-xl-2">
      <div class="list-group border border-primary rounded h-100">
<!--        <a href="#" class="list-group-item list-group-item-action">Thông tin cửa hàng</a>-->
        <a class="list-group-item list-group-item-action" routerLink="/show-finance" routerLinkActive="active">Tài chính</a>
        <a class="list-group-item list-group-item-action" routerLink="/pawn-list" routerLinkActive="active">Danh sách đồ cầm</a>
        <a class="list-group-item list-group-item-action" routerLink="/list-top-10-contract" routerLinkActive="active">10 hợp đồng mới nhất</a>
        <a class="list-group-item list-group-item-action" routerLink="/statistic-interest" routerLinkActive="active">Thống kê lợi nhuận</a>
        <a class="list-group-item list-group-item-action" routerLink="/list-contract" routerLinkActive="active">Lịch sử giao dịch</a>
      </div>
    </div>
    <div class="col-lg-10 col-xl-10">
      <h2 class="text-center mt-3 mb-5" style="color: darkblue; font-size: 35px">DANH SÁCH ĐỒ CẦM TRONG KHO</h2>
      <form class="row mt-5" [formGroup]="searchPawn" (submit)="searchP()" (keydown.enter)="searchP2($event)">
        <div class="col-lg-5 col-xl-5"></div>
        <label class="col-lg-1 col-xl-1 col-form-label" for="sc">Tìm Đồ: </label>
        <div class="col-lg-3 col-xl-3">
          <input type="text" class="form-control border-dark" id="sc" formControlName="search" maxlength="25"/>
        </div>
        <div class="col-lg-2 col-xl-2">
          <select class="form-select border-dark" formControlName="typeSearch">
            <option value="">Loại Đồ</option>
            <option *ngFor="let t of typeProductList" [value]="t.name">{{t.name}}</option>
          </select>
        </div>
        <div class="col-lg-1 col-xl-1">
          <button class="btn btn-success ml-1"><i class="fas fa-search-plus"></i></button>
        </div>
      </form>
      <div class="row mt-3">
        <table class="table table-striped table-bordered" id="table1" style="width: 100%">
          <thead class="table-primary text-center">
          <tr>
            <th>Tên Đồ</th>
            <th>Loại Đồ</th>
            <th>Trạng Thái</th>
            <th>Giá Mua</th>
            <th>Chức Năng</th>
          </tr>
          </thead>
          <tbody class="text-center">
          <tr *ngFor="let p of pawnList" >
            <td>{{p.productName}}</td>
            <td>{{p.typeProduct.name}}</td>
            <td *ngIf="p.statusContract.statusContractId == 3"
                [ngStyle]="{'color': 'green', 'font-size': '15px', 'font-weight': 'bold'}">Thanh Lý</td>
            <td *ngIf="p.statusContract.statusContractId == 1"
                [ngStyle]="{'color': 'orange', 'font-size': '15px', 'font-weight': 'bold'}">Đang Cầm</td>
            <td *ngIf="p.statusContract.statusContractId == 2"
                [ngStyle]="{'color': 'red', 'font-size': '15px', 'font-weight': 'bold'}">Quá Hạn</td>
            <td class="text-danger">{{p.loanMoney | currency: "VND"}}</td>
            <td>
              <button class="btn btn-outline-warning border-0" (click)="temp(p.contractId)"
                      data-bs-toggle="modal" data-bs-target="#exampleModal">
                <i class="fa fa-eye"></i>
              </button> &nbsp;
              <button class="btn btn-outline-danger border-0" (click)="createLiquidation(p.contractId)"
                      [disabled]="p.statusContract.statusContractId != 2">
                <i class="fas fa-shipping-fast"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="d-flex justify-content-center">
        <nav aria-label="Page navigation example">
          <ul class="pagination justify-content-end">
            <li class="page-item " [ngClass]="pageNow === 0 ? 'disabled' : ''">
              <button class="page-link" aria-label="Previous" (click)="getPage(0)">
                <span aria-hidden="true">&laquo;</span>
              </button>
            </li>
            <li class="page-item" [ngClass]="pageNow === 0 ? 'disabled' : ''">
              <button class="page-link" aria-label="Previous" (click)="getPage(pageNow - 1)">
                <span aria-hidden="true">&lsaquo;</span>
              </button>
            </li>
            <li class="page-item"  *ngIf="pageNow-1>=0">
              <button class="page-link" (click)="getPage(pageNow - 1)">{{pageNow}}</button>
            </li>
            <li class="page-item active"  >
              <button class="page-link">{{pageNow+1}}</button>
            </li>
            <li class="page-item "  *ngIf="pageNow < totalPage.length-1">
              <button class="page-link" (click)="getPage(pageNow + 1)">{{pageNow+2}}</button>
            </li>
<!--            <li class="page-item" *ngFor="let item of totalPage; let i = index" [attr.data-index]="i" [ngClass]="i==pageNow? 'active':''">-->
<!--              <button class="page-link" (click)="getPage(i)">{{i+1}}</button>-->
<!--            </li>-->
            <li class="page-item" [ngClass]="pageNow == totalPage.length-1 ? 'disabled' : ''">
              <button class="page-link" aria-label="Next" (click)="getPage(pageNow+1)">
                <span aria-hidden="true">&rsaquo;</span>
              </button>
            </li>
            <li class="page-item" [ngClass]="pageNow == totalPage.length-1 ? 'disabled' : ''">
              <button class="page-link" aria-label="Next" (click)="getPage(totalPage.length-1)">
                <span aria-hidden="true">&raquo;</span>
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="text-center mt-3 mb-5" style="color: darkblue; font-size: 35px">CHI TIẾT ĐỒ CẦM</h2>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row">
            <div class="col-lg-1 col-xl-1 col-md-1"></div>
            <div class="col-lg-11 col-xl-11 col-md-11">
              <div class="row">
                <label class="col-lg-6 col-md-6 col-xl-6">Tên khách hàng:</label>
                <label class="col-lg-6 col-md-6 col-xl-6">{{pawnInfo?.customer?.name}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Đồ cầm:</label>
                <label class="col-lg-6 col-md-6 col-xl-6">{{pawnInfo?.productName}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Loại đồ:</label>
                <label class="col-lg-6 col-md-6 col-xl-6">{{pawnInfo?.typeProduct?.name}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Tiền cho vay:</label>
                <label class="col-lg-6 col-md-6 col-xl-6 text-danger">{{pawnInfo?.loanMoney | currency: "VND"}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Tiền lãi:</label>
                <label class="col-lg-6 col-md-6 col-xl-6 text-danger">{{pawnInfo?.interestMoney | currency: "VND"}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Ngày bắt đầu:</label>
                <label class="col-lg-6 col-md-6 col-xl-6">{{pawnInfo?.startDate | date: "dd/MM/yyyy"}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Ngày kết thúc:</label>
                <label class="col-lg-6 col-md-6 col-xl-6">{{pawnInfo?.endDate | date: "dd/MM/yyyy"}}</label>
              </div>
              <div class="row mt-2">
                <label class="col-lg-6 col-md-6 col-xl-6">Trạng thái:</label>
                <label class="col-lg-6 col-md-6 col-xl-6" *ngIf="pawnInfo?.statusContract?.statusContractId == 1"
                       [ngStyle]="{'color': 'green', 'font-size': '15px', 'font-weight': 'bold'}" >Thanh Lý</label>
                <label class="col-lg-6 col-md-6 col-xl-6" *ngIf="pawnInfo?.statusContract?.statusContractId == 2"
                       [ngStyle]="{'color': 'yellow', 'font-size': '15px', 'font-weight': 'bold'}" >Đang Cầm</label>
                <label class="col-lg-6 col-md-6 col-xl-6" *ngIf="pawnInfo?.statusContract?.statusContractId == 3"
                       [ngStyle]="{'color': 'red', 'font-size': '15px', 'font-weight': 'bold'}" >Quá Hạn</label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
      </div>
    </div>
  </div>
</div>
